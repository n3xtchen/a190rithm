# Workflow Guidelines 迭代演进记录

本文档以 Commit 为粒度记录 `docs/agent/workflow_guidelines.md` 的迭代发布历史。每一项代表一次正式的逻辑发布。

## 迭代发布历史

### [Iteration #1] 制定 Agent 协作规范与工作流指南 (v1.0 - v1.3)
*   **关联 Commit**: `33a32e0` (docs: Agent 协作规范-制定工作流指南及 Jupyter 操作准则)
*   **日期**: 2026-01-14
*   **发布摘要**:
    基于历史会话复盘，确立了 Agent 在本项目中进行 Python 开发与 Jupyter 分析的标准操作规范。该迭代经历从“避坑指南”到“强制性工程标准”的演进。

*   **内部演进细节**:
    *   **v1.0 (基线)**: 确立禁止 `%pip` 和管理 Context Window 的初步共识。
    *   **v1.1 (架构调整)**: 提出“通用规范 vs 子规范”的分层理念，将环境管理提升至项目级。
    *   **v1.2 (可视化)**: 引入目录树结构，明确 `src/a190rithm/` 的核心逻辑地位。
    *   **v1.3 (核心决策)**: 针对“路径偏移”痛点，确立 **“强制根目录启动”** 策略，并引入断言校验代码逻辑。

*   **演进过程总结**:
    1.  **起源与定位调整**:
        *   **初始需求**: 试图创建一个根目录文件 `GEMINI.md` 来提示 AI 注意环境安装失败、路径错误等陷阱。
        *   **定位转变**: 放弃临时文件，转为在 `docs/agent/` 下建立长期维护的文档，并从英文草稿转为全中文内容。
    2.  **结构重构 (Refactoring)**:
        *   **分层架构**: 将文档拆分为 **“Python 项目通用规范”** 和 **“Jupyter Notebook 操作子规范”**。
        *   **可视化规范**: 引入 **目录树 (Directory Tree)** 展示标准结构，明确代码与数据的物理分离。
    3.  **核心逻辑深化：静态 vs 动态**:
        *   **问题提出**: 用户质疑“如果有静态目录规范，Notebook 还需要验证目录吗？”
        *   **深度分析**: 明确了 **静态工程结构**（文件存哪里）与 **动态运行时环境**（Kernel 在哪里启动）的区别。
        *   **策略升级**: 从“防御性编程”升级为 **“强制性锚定”** (Mandatory Anchoring)。
        *   **落地手段**: 规定 Kernel **必须** 在项目根目录启动，并在规范中增加 `assert` 代码块校验 `pyproject.toml` 是否存在。

*   **确立的核心标准**:
    1.  **环境管控**: 唯一使用 `uv`，严禁 Notebook 内 Magic Install。
    2.  **路径锚定**: Kernel 必须在项目根目录启动，路径基于根目录静态化。
    3.  **开发原则**: 核心代码沉淀至 `src/`，Notebook 仅作分析层。
    4.  **效率优化**: 默认 `brief` 模式读取，控制富媒体输出大小。

---
*后续变更将按后续 Commit 粒度持续追加。*
